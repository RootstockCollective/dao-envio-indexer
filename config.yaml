# yaml-language-server: $schema=./node_modules/envio/evm.schema.json
name: dao-envio-indexer-rc-testnet
description: DAO governance indexer for release-candidate (Rootstock Testnet)

# Performance optimizations
unordered_multichain_mode: true
preload_handlers: true
rollback_on_reorg: true

contracts:
  - name: Governor
    abi_file_path: ./abis/Governor.json
    handler: src/EventHandlers.ts
    events:
      # Proposal lifecycle events
      - event: 'ProposalCreated(uint256 proposalId, address proposer, address[] targets, uint256[] values, string[] signatures, bytes[] calldatas, uint256 voteStart, uint256 voteEnd, string description)'
      - event: 'ProposalCanceled(uint256 proposalId)'
      - event: 'ProposalExecuted(uint256 proposalId)'
      - event: 'ProposalQueued(uint256 proposalId, uint256 etaSeconds)'
      # Voting events
      - event: 'VoteCast(address indexed voter, uint256 proposalId, uint8 support, uint256 weight, string reason)'
      - event: 'VoteCastWithParams(address indexed voter, uint256 proposalId, uint8 support, uint256 weight, string reason, bytes params)'

networks:
  - id: 31  # Rootstock Testnet
    start_block: 5784028
    # RPC configuration for Rootstock Testnet (HyperSync not yet available)
    rpc_config:
      url: https://rpc.testnet.rootstock.io/bltlMxEbPCHzmW9gST9AEVR2Wa3HH2-T
      initial_block_interval: 2000
      interval_ceiling: 10000
      backoff_multiplicative: 0.8
      acceleration_additive: 2000
      backoff_millis: 5000
      query_timeout_millis: 20000
    contracts:
      - name: Governor
        address: 0xb77ab0075e9805efa82040bed73368d988a2d9c2
